<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <!--
       Notre Builder
   -->
   <extension id="fr.asi.xsp.ccexport.builder" point="org.eclipse.core.resources.builders">
      <builder>
         <run class="fr.asi.xsp.ccexport.CcExportBuilder"/>
      </builder>
   </extension>
   
   <!-- 
       Une propriété pour savoir si on est sur un projet de type Domino 
   -->
   <extension point="org.eclipse.core.expressions.propertyTesters">
       <propertyTester
             class="fr.asi.xsp.ccexport.CcExportPropertyTester"
             id="fr.asi.xsp.ccexport.CcExportPropertyTester"
             namespace="fr.asi.xsp.ccexport"
             properties="isDominoProject,isSetup"
             type="org.eclipse.jface.viewers.ISelection"/>
   </extension>
   
   <!--
       Les commandes utilisées par les menus et les handlers
   -->
   <extension point="org.eclipse.ui.commands">
       <command
             id="fr.asi.xsp.ccexport.command.setup"
             name="Configure Synchro"/>
       <command
             id="fr.asi.xsp.ccexport.command.unsetup"
             name="Deconfigure Synchro"/>
       <command
             id="fr.asi.xsp.ccexport.command.sync"
             name="Forcer la Synchro"/>
   </extension>
   
   <!--
       Un handler pour ajouter le builder sur un projet
       Il n'est actif que sur les projets de type Domino
   -->
   <extension point="org.eclipse.ui.handlers">
       <handler
             class="fr.asi.xsp.ccexport.handlers.SetupHandler"
             commandId="fr.asi.xsp.ccexport.command.setup"/>
       <handler
             class="fr.asi.xsp.ccexport.handlers.UnsetupHandler"
             commandId="fr.asi.xsp.ccexport.command.unsetup"/>
       <handler
             class="fr.asi.xsp.ccexport.handlers.SyncHandler"
             commandId="fr.asi.xsp.ccexport.command.sync"/>
    </extension>
	
	<!--
	    Notre entrée dans le menu contextuel du package explorer
    -->
    <extension point="org.eclipse.ui.menus">
       <menuContribution locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?after=additions">
          <menu
                id="fr.asi.xsp.ccexport"
                label="Cc Export">
             <command
                   commandId="fr.asi.xsp.ccexport.command.setup"
                   label="Configure Synchro"
                   mode="FORCE_TEXT"
                   style="push"/>
             <command
                   commandId="fr.asi.xsp.ccexport.command.unsetup"
                   label="Deconfigure synchro"
                   mode="FORCE_TEXT"
                   style="push"/>
             <command
                   commandId="fr.asi.xsp.ccexport.command.sync"
                   label="Forcer la Synchro"
                   mode="FORCE_TEXT"
                   style="push"/>
             <visibleWhen>
                <with variable="selection">
                   <test property="fr.asi.xsp.ccexport.isDominoProject"/>
                </with>
             </visibleWhen>
          </menu>
       </menuContribution>
    </extension>
</plugin>
